<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IoT Locator Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body class="min-h-screen bg-gray-50">
  <div id="dashboard" class="min-h-screen hidden">
    <!-- Map Container -->
    <div id="map-container" class="relative h-full w-full">
      <div id="map" class="absolute inset-0 z-0" style="width: 100%; height: 100%;"></div>
    </div>

    <!-- Floating Area -->
    <div id="floatingArea" class="fixed top-4 left-4 z-50" style="z-index: 1000;">
      <button id="addDeviceButton" onclick="showDeviceRegisterForm()" 
              class="flex items-center justify-center gap-2 min-w-[140px] md:min-w-[160px] px-3 md:px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium text-base rounded-md transform hover:scale-105 transition-transform duration-200 shadow">
        <span class="text-lg">+</span>
        <span class="text-base">Add New Device</span>
      </button>
    </div>

    <!-- Floating Logout Button Right -->
    <div id="logoutArea" class="fixed top-5 right-5 z-50" style="z-index: 1000;">
      <button onclick="logout()" 
              class="flex items-center justify-center gap-2 min-w-[100px] md:min-w-[140px] px-3 md:px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium text-base rounded-md transform hover:scale-105 transition-transform duration-200 shadow">
        <span class="text-base">Logout</span>
      </button>
    </div>
  </div>

  <!-- Load MQTT.js before dashboard.js -->
  <script src="js/dashboard.js"></script>
  <script>
    // Initialize dashboard when page loads
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Page loaded, initializing dashboard');
      window.initDashboard();
    });
  </script>
</body>
</html>
